# Proxy (Заместитель)

**Proxy** - структурный паттерн проектирования, который вместо реальных объектов предоставляет объекты-заменители.

Эти объекты перехватывают вызов к оригиналам и позволяют что-то до или после обращения к оригинальному объекту.

Т.е это своего рода прослойка, которая помогает произвести какие-то дополнительные манипуляции.

```typescript
class CarAccess {
  open() {
    console.log('Opening car door')
  }

  close() {
    console.log('Closing the car door')
  }
}

class SecuritySystem {
  constructor(door) {
    this.door = door
  }
  
  open(password) {
    if (this.authenticate(password)) {
      this.door.open()
    } else {
      console.log('Access denied!')
    }
  }
  
  authenticate(password) {
    return password === 'Ilon'
  }
  
  close() {
    this.door.close()
  }
}

const door = new SecuritySystem(new CarAccess())

door.open('Jack') // 'Access denied'

door.open('Ilon') // 'Opening car door'

door.close()
```

## Когда нужен

- Ленивая инициализация (виртуальный прокси). 
  Когда у вас есть тяжёлый объект, грузящий данные из файловой системы или базы данных.
- Защита доступа (защищающий прокси). 
  Когда в программе есть разные типы пользователей, и вам хочется защищать объект от неавторизованного доступа. 
  Например, если ваши объекты — это важная часть операционной системы, а пользователи — сторонние программы (хорошие или вредоносные).
- Локальный запуск сервиса (удалённый прокси). 
  Когда настоящий сервисный объект находится на удалённом сервере.
- Логирование запросов (логирующий прокси). 
  Когда требуется хранить историю обращений к сервисному объекту.
- Кеширование объектов («умная» ссылка). 
  Когда нужно кешировать результаты запросов клиентов и управлять их жизненным циклом.

## Резюме

В общем это middleware.
